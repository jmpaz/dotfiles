# vim: set filetype=i3config :

bindsym $mod+r mode "resize"
mode "resize" {
    bindsym $left       resize shrink width 10 px or 10 ppt
    bindsym $down       resize grow height 10 px or 10 ppt
    bindsym $up         resize shrink height 10 px or 10 ppt
    bindsym $right      resize grow width 10 px or 10 ppt

    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym $mod+r mode "default"
}

bindsym $mod+g mode "gaps"
mode "gaps" {
    bindsym $up gaps inner all plus 5
    bindsym $down gaps inner all minus 5
    bindsym $left gaps outer all minus 5
    bindsym $right gaps outer all plus 5
    bindsym shift+$up gaps inner all plus 2
    bindsym shift+$down gaps inner all minus 2
    bindsym shift+$left gaps outer all minus 2
    bindsym shift+$right gaps outer all plus 2
    bindsym 0 gaps inner all set 0; gaps outer all set 0; mode "default"

    bindsym r reload
    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym Tab    mode "default"

}

set $screenshotmenu "screenshot: [r]egion  [w]indow  [f]ullscreen"
bindsym $mod+s mode $screenshotmenu
mode $screenshotmenu {
    # select region or given window
    bindsym r --release exec --no-startup-id screenshot select; mode "screenshot"; mode "default"
    # currently-focused window
    bindsym w --release exec --no-startup-id screenshot window; mode "screenshot"; mode "default"
    # full screen
    bindsym f --release exec --no-startup-id screenshot full; mode "screenshot"; mode "default"

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

set $layoutmenu "layout: [s]tacked   [tab]bed   [h]-split   [v]-split"
bindsym $mod+x mode $layoutmenu
mode $layoutmenu {
    # stacked
    bindsym s layout stacking ; mode "default"
    # tabbed
    bindsym Tab layout tabbed  ; mode "default"
    bindsym Control+Tab layout tabbed  ; mode "default"
    # split
    bindsym b layout splith ; mode "default"
    bindsym h layout splith ; mode "default"
    bindsym v layout splitv ; mode "default"

    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym Tab    mode "default"
}

set $sysmenu "system:  [r]eload  [l]ock  [p]oweroff  re[b]oot"
bindsym Control+$alt+x mode $sysmenu
mode $sysmenu {
    bindsym r reload
    bindsym g mode $gapsmenu
    bindsym Control+r restart
    # bindsym l exec --no-startup-id ~/.config/i3/scripts/lock.sh ; mode "default"
    bindsym Control+p exec shutdown -P now
    bindsym Control+b exec shutdown -r now
    
    bindsym Control+Escape exit
    bindsym Return mode "default"
    bindsym Escape mode "default"
    # bindsym Control+$alt+x mode "default"
}

